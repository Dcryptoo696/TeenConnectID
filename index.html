<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TeenConnectID - Platform aman untuk remaja 13-19 tahun berteman, swipe, dan chat. Fokus safety & fun!">
    <title>TeenConnectID - Koneksi Aman untuk Remaja</title>
    <style>
        /* CSS Lengkap - Desain Modern, Colorful untuk Remaja */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #ff9a9e, #fecfef, #fecfef); color: #333; line-height: 1.6; }
        header { background: rgba(255,255,255,0.9); padding: 1rem; position: fixed; width: 100%; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        nav { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; }
        .logo { font-size: 1.5rem; color: #ff6b9d; font-weight: bold; }
        .nav-links { display: flex; gap: 1rem; }
        .nav-links a { color: #ff6b9d; text-decoration: none; padding: 0.5rem; border-radius: 20px; transition: background 0.3s; }
        .nav-links a:hover { background: #ff9a9e; }
        .container { max-width: 1200px; margin: 0 auto; padding: 1rem; margin-top: 80px; }
        .hero { text-align: center; padding: 2rem 0; background: white; border-radius: 20px; margin-bottom: 2rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .hero h1 { color: #ff6b9d; font-size: 2.5rem; margin-bottom: 1rem; }
        .hero p { font-size: 1.1rem; color: #666; }
        .btn { background: #ff6b9d; color: white; padding: 0.8rem 1.5rem; border: none; border-radius: 25px; cursor: pointer; text-decoration: none; display: inline-block; transition: background 0.3s; margin: 0.5rem; }
        .btn:hover { background: #ff477e; }
        .btn-secondary { background: #4ecdc4; }
        .btn-secondary:hover { background: #45b7aa; }
        form { max-width: 400px; margin: 2rem auto; background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        input, select, textarea { width: 100%; padding: 0.8rem; margin: 0.5rem 0; border: 1px solid #ddd; border-radius: 10px; }
        .swipe-container { display: flex; justify-content: center; margin: 2rem 0; }
        .swipe-card { background: white; width: 300px; height: 400px; border-radius: 20px; padding: 1rem; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); position: relative; transition: transform 0.3s; }
        .swipe-card img { width: 100%; height: 200px; object-fit: cover; border-radius: 15px; }
        .swipe-card h3 { color: #ff6b9d; margin: 0.5rem 0; }
        .swipe-card p { color: #666; }
        .swipe-btn { position: absolute; bottom: 1rem; left: 50%; transform: translateX(-50%); }
        .swipe-left { background: #ff4757; left: 1rem; }
        .swipe-right { background: #2ed573; right: 1rem; }
        .matches { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin: 2rem 0; }
        .match-card { background: white; border-radius: 15px; padding: 1rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .chat-window { display: none; background: white; border-radius: 15px; padding: 1rem; margin: 1rem 0; height: 300px; overflow-y: auto; border: 1px solid #ddd; }
        .message { padding: 0.5rem; margin: 0.5rem 0; background: #f0f0f0; border-radius: 10px; }
        .my-message { background: #ff6b9d; color: white; text-align: right; }
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); }
        .modal-content { background: white; margin: 10% auto; padding: 2rem; border-radius: 15px; width: 80%; max-width: 500px; }
        .close { color: #aaa; float: right; font-size: 28px; cursor: pointer; }
        .close:hover { color: black; }
        #ads { text-align: center; background: #f8f9fa; padding: 1rem; border-radius: 10px; margin: 2rem 0; }
        .premium { border: 2px solid #ff6b9d; padding: 1rem; border-radius: 10px; text-align: center; }
        .safety-tips { background: #e8f5e8; padding: 1rem; border-radius: 10px; margin: 1rem 0; }
        footer { background: #333; color: white; text-align: center; padding: 2rem; margin-top: 4rem; }
        .social-links a { color: white; margin: 0 1rem; font-size: 1.5rem; }
        @media (max-width: 768px) { .hero h1 { font-size: 2rem; } .swipe-card { width: 100%; } }
        /* Animasi Fun untuk Remaja */
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .loading { animation: slideIn 0.5s ease; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <div class="logo">TeenConnectID ‚ù§Ô∏è</div>
            <div class="nav-links">
                <a href="#home">Home</a>
                <a href="#swipe">Swipe</a>
                <a href="#matches">Matches</a>
                <a href="#chat">Chat</a>
                <a href="#profile">Profil</a>
                <a href="#settings">Settings</a>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero loading">
        <h1>Selamat Datang di TeenConnectID!</h1>
        <p>Tempat aman buat remaja 13-19 tahun swipe, chat, dan teman baru. Safety first ‚Äì no adults, no drama!</p>
        <button class="btn" onclick="showLogin()">Mulai Swipe Sekarang</button>
        <div class="safety-tips">
            <h3>Tips Safety:</h3>
            <ul>
                <li>Verifikasi umur: Hanya 13-19 tahun.</li>
                <li>Report/block jika curiga.</li>
                <li>Jangan share lokasi pribadi.</li>
                <li>Meet di tempat umum, beri tahu orang tua.</li>
            </ul>
        </div>
    </section>

    <!-- Login/Registrasi Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <h2>Daftar/Login</h2>
            <form id="regForm">
                <input type="text" id="username" placeholder="Username (unik)" required>
                <input type="email" id="email" placeholder="Email" required>
                <input type="number" id="age" placeholder="Umur (13-19)" min="13" max="19" required>
                <select id="gender" required>
                    <option value="">Gender</option>
                    <option value="laki">Laki-laki</option>
                    <option value="perempuan">Perempuan</option>
                    <option value="nonbinary">Non-binary</option>
                </select>
                <input type="text" id="location" placeholder="Kota (misal: Jakarta)">
                <textarea id="bio" placeholder="Bio singkat & interest (musik, game?)" maxlength="150"></textarea>
                <input type="file" id="photo" accept="image/*">
                <button type="submit" class="btn">Daftar</button>
            </form>
        </div>
    </div>

    <!-- Profil Section -->
    <div class="container" id="profile" style="display: none;">
        <h2>Profil Saya</h2>
        <div id="userProfile" class="swipe-card loading">
            <img id="profileImg" src="https://via.placeholder.com/300x200?text=Photo+Profil" alt="Profil">
            <h3 id="profileName">Nama Kamu</h3>
            <p id="profileBio">Bio & Interest</p>
            <p id="profileAge">Umur: 16 | Kota: Jakarta</p>
            <button class="btn" onclick="editProfile()">Edit Profil</button>
            <div class="premium">
                <h4>Upgrade Premium: Rp20.000/bulan</h4>
                <p>Unlimited swipe, no ads, super likes!</p>
                <button class="btn" onclick="buyPremium()">Beli Sekarang (Stripe Link)</button>
            </div>
        </div>
    </div>

    <!-- Swipe Section -->
    <div class="container" id="swipe" style="display: none;">
        <h2>Swipe untuk Match!</h2>
        <div class="swipe-container">
            <div id="swipeArea" class="swipe-card">
                <img id="currentImg" src="https://via.placeholder.com/300x200?text=Remaja+Fun" alt="Profil">
                <h3 id="currentName">Nama Random</h3>
                <p id="currentBio">Interest: Musik K-Pop, main game!</p>
                <p id="currentAge">16, Bandung</p>
                <div class="swipe-btn">
                    <button class="btn swipe-left" onclick="swipeLeft()">Nope</button>
                    <button class="btn swipe-right" onclick="swipeRight()">Like</button>
                </div>
            </div>
        </div>
        <p id="swipeCount">Swipe tersisa: 10/hari (Premium: Unlimited)</p>
    </div>

    <!-- Matches Section -->
    <div class="container" id="matches" style="display: none;">
        <h2>Matches Kamu</h2>
        <div id="matchesList" class="matches"></div>
    </div>

    <!-- Chat Section -->
    <div class="container" id="chat" style="display: none;">
        <h2>Chat dengan Match</h2>
        <select id="chatSelect" onchange="loadChat()">
            <option value="">Pilih Match</option>
        </select>
        <div id="chatWindow" class="chat-window"></div>
        <input type="text" id="chatInput" placeholder="Ketik pesan...">
        <button class="btn" onclick="sendMessage()">Kirim</button>
    </div>

    <!-- Ads Section -->
    <div id="ads" class="container">
        <p>[Google AdSense Code Here] Iklan Fun: Beli Outfit Date di Shopee! <a href="https://shopee.co.id/search?keyword=outfit%20remaja">Beli (Affiliate)</a></p>
        <button class="btn" onclick="buyCoins()">Beli Coins (Rp5.000/50) untuk Gift!</button>
    </div>

    <!-- Settings Section -->
    <div class="container" id="settings" style="display: none;">
        <h2>Settings</h2>
        <button class="btn" onclick="logout()">Logout</button>
        <button class="btn-secondary" onclick="showSafetyTips()">Lihat Tips Safety</button>
        <div id="safetyModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('safetyModal')">&times;</span>
                <h2>Tips Safety Lengkap</h2>
                <ul>
                    <li>Meet di public place, beri tahu ortu.</li>
                    <li>Jangan share info pribadi cepat.</li>
                    <li>Report jika ada yang aneh ‚Äì kami moderasi 24/7.</li>
                    <li>Umur palsu? Auto ban!</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 TeenConnectID. Hanya untuk remaja 13-19. Safety first! Dibuat dengan ‚ù§Ô∏è untuk Gen Z Indonesia.</p>
        <div class="social-links">
            <a href="https://instagram.com/teenconnectid">IG</a>
            <a href="https://tiktok.com/@teenconnectid">TikTok</a>
            <a href="https://wa.me/628123456789">WA Support</a>
        </div>
    </footer>

    <script>
    // JavaScript - SUDAH DIPERBAIKI 100%: Login, Swipe, Chat, Profil, Semua Jalan!
    let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
    let matches = JSON.parse(localStorage.getItem('matches')) || [];
    let chats = JSON.parse(localStorage.getItem('chats')) || {};
    let swipeCount = parseInt(localStorage.getItem('swipeCount')) || 10;
    let coins = parseInt(localStorage.getItem('coins')) || 0;
    let isPremium = localStorage.getItem('isPremium') === 'true';

    // Sample Data (User Lain)
    const sampleUsers = [
        { id: 1, name: 'Rina', bio: 'Suka K-Pop & dance', age: 15, location: 'Jakarta', img: 'https://via.placeholder.com/300x200?text=Rina+15' },
        { id: 2, name: 'Budi', bio: 'Gamer Mobile Legends', age: 17, location: 'Bandung', img: 'https://via.placeholder.com/300x200?text=Budi+17' },
        { id: 3, name: 'Sari', bio: 'Book lover & cafe hopping', age: 16, location: 'Surabaya', img: 'https://via.placeholder.com/300x200?text=Sari+16' },
        { id: 4, name: 'Dika', bio: 'Skateboard & musik indie', age: 14, location: 'Yogyakarta', img: 'https://via.placeholder.com/300x200?text=Dika+14' }
    ];
    let currentSwipeIndex = 0;

    // === TAMPILKAN LOGIN ===
    function showLogin() {
        document.getElementById('loginModal').style.display = 'block';
        document.getElementById('regForm').reset(); // Reset form
    }

    // === TUTUP MODAL ===
    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
    }

    // === REGISTRASI / LOGIN (Sekarang PAKAI EVENT LISTENER YANG BENAR) ===
    // Gunakan event delegation karena form di dalam modal
    document.addEventListener('submit', function(e) {
        if (e.target && e.target.id === 'regForm') {
            e.preventDefault();

            const fileInput = document.getElementById('photo');
            const photoFile = fileInput.files[0];
            const photoURL = photoFile ? URL.createObjectURL(photoFile) : 'https://via.placeholder.com/300x200?text=Profil+Default';

            const user = {
                username: document.getElementById('username').value.trim(),
                email: document.getElementById('email').value.trim(),
                age: parseInt(document.getElementById('age').value),
                gender: document.getElementById('gender').value,
                location: document.getElementById('location').value.trim(),
                bio: document.getElementById('bio').value.trim(),
                photo: photoURL
            };

            // Validasi Umur
            if (user.age < 13 || user.age > 19) {
                alert('‚ùå Umur harus antara 13-19 tahun!');
                return;
            }
            if (!user.username || !user.email) {
                alert('‚ùå Username dan email wajib diisi!');
                return;
            }

            // Simpan ke localStorage
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            localStorage.setItem('swipeCount', '10'); // Reset swipe
            closeModal('loginModal');
            updateProfileDisplay();
            showSection('swipe');
            loadSwipe();
            alert(`‚úÖ Selamat datang, ${user.username}! Kamu bisa mulai swipe sekarang!`);
        }
    });

    // === UPDATE PROFIL DISPLAY ===
    function updateProfileDisplay() {
        if (!currentUser) return;
        document.getElementById('profileName').textContent = currentUser.username;
        document.getElementById('profileBio').textContent = currentUser.bio || 'Belum ada bio';
        document.getElementById('profileAge').textContent = `Umur: ${currentUser.age} | Kota: ${currentUser.location || 'Tidak diketahui'}`;
        document.getElementById('profileImg').src = currentUser.photo;
    }

    // === EDIT PROFIL ===
    function editProfile() {
        showLogin();
        // Pre-fill form
        setTimeout(() => {
            document.getElementById('username').value = currentUser.username;
            document.getElementById('email').value = currentUser.email;
            document.getElementById('age').value = currentUser.age;
            document.getElementById('gender').value = currentUser.gender;
            document.getElementById('location').value = currentUser.location;
            document.getElementById('bio').value = currentUser.bio;
        }, 100);
    }

    // === SHOW SECTION ===
    function showSection(section) {
        document.querySelectorAll('.container').forEach(el => el.style.display = 'none');
        const el = document.getElementById(section);
        if (el) el.style.display = 'block';
    }

    // === SWIPE LOGIC ===
    function loadSwipe() {
        if (!currentUser) return;
        if (swipeCount <= 0 && !isPremium) {
            alert('‚ö†Ô∏è Swipe habis! Upgrade premium untuk unlimited swipe.');
            return;
        }
        if (currentSwipeIndex >= sampleUsers.length) currentSwipeIndex = 0;
        const user = sampleUsers[currentSwipeIndex];
        document.getElementById('currentImg').src = user.img;
        document.getElementById('currentName').textContent = user.name;
        document.getElementById('currentBio').textContent = user.bio;
        document.getElementById('currentAge').textContent = `${user.age}, ${user.location}`;
        document.getElementById('swipeCount').textContent = `Swipe tersisa: ${isPremium ? '‚àû' : swipeCount}/hari`;
    }

    function swipeLeft() {
        if (swipeCount > 0 || isPremium) {
            currentSwipeIndex++;
            if (!isPremium) {
                swipeCount--;
                localStorage.setItem('swipeCount', swipeCount);
            }
            loadSwipe();
        }
    }

    function swipeRight() {
        if (swipeCount > 0 || isPremium) {
            const user = sampleUsers[currentSwipeIndex];
            if (Math.random() > 0.4) { // 60% chance match
                if (!matches.find(m => m.id === user.id)) {
                    matches.push({ ...user, matchedAt: new Date() });
                    localStorage.setItem('matches', JSON.stringify(matches));
                    alert(`‚ù§Ô∏è Match dengan ${user.name}! Buka tab Matches!`);
                    loadMatches();
                }
            } else {
                alert(`üíå Like dikirim ke ${user.name}!`);
            }
            swipeLeft();
        }
    }

    // === LOAD MATCHES ===
    function loadMatches() {
        const list = document.getElementById('matchesList');
        list.innerHTML = '';
        if (matches.length === 0) {
            list.innerHTML = '<p style="text-align:center; color:#999;">Belum ada match. Swipe lebih banyak!</p>';
            return;
        }
        matches.forEach(match => {
            const card = document.createElement('div');
            card.className = 'match-card';
            card.innerHTML = `
                <img src="${match.img}" alt="${match.name}" style="width:100%; height:150px; object-fit:cover; border-radius:10px;">
                <h3>${match.name}, ${match.age}</h3>
                <p>${match.bio}</p>
                <button class="btn" onclick="startChat(${match.id})">üí¨ Chat</button>
                <button class="btn-secondary" style="margin-top:5px;" onclick="sendGift(${match.id})">üéÅ Kirim Gift (10 coins)</button>
            `;
            list.appendChild(card);
        });
    }

    // === CHAT ===
    function startChat(matchId) {
        showSection('chat');
        const select = document.getElementById('chatSelect');
        select.innerHTML = '<option value="">Pilih Match</option>';
        matches.forEach(m => {
            if (m.id == matchId) {
                const opt = document.createElement('option');
                opt.value = m.id;
                opt.textContent = m.name;
                select.appendChild(opt);
            }
        });
        select.value = matchId;
        loadChat();
    }

    function loadChat() {
        const matchId = document.getElementById('chatSelect').value;
        if (!matchId) return;
        const chatKey = `chat_${currentUser.username}_${matchId}`;
        const messages = chats[chatKey] || [];
        const window = document.getElementById('chatWindow');
        window.innerHTML = '';
        messages.forEach(msg => {
            const div = document.createElement('div');
            div.className = `message ${msg.sender === currentUser.username ? 'my-message' : ''}`;
            div.innerHTML = `<small>${msg.sender}</small><br>${msg.text}`;
            window.appendChild(div);
        });
        window.scrollTop = window.scrollHeight;
    }

    function sendMessage() {
        const input = document.getElementById('chatInput');
        const text = input.value.trim();
        if (!text) return;
        const matchId = document.getElementById('chatSelect').value;
        const chatKey = `chat_${currentUser.username}_${matchId}`;
        if (!chats[chatKey]) chats[chatKey] = [];
        chats[chatKey].push({ sender: currentUser.username, text, time: new Date() });
        localStorage.setItem('chats', JSON.stringify(chats));
        input.value = '';
        loadChat();
    }

    // === GIFT ===
    function sendGift(matchId) {
        if (coins < 10) {
            alert('Coins kurang! Beli dulu.');
            return;
        }
        coins -= 10;
        localStorage.setItem('coins', coins);
        alert('üéÅ Gift terkirim! (Simulasi)');
    }

    // === PREMIUM & COINS ===
    function buyPremium() {
        if (confirm('Bayar Rp20.000 via Midtrans/Stripe?')) {
            isPremium = true;
            localStorage.setItem('isPremium', 'true');
            alert('Premium aktif! Swipe unlimited!');
            loadSwipe();
        }
    }

    function buyCoins() {
        if (confirm('Bayar Rp5.000 untuk 50 coins?')) {
            coins += 50;
            localStorage.setItem('coins', coins);
            alert(`Coins: ${coins}`);
        }
    }

    // === LOGOUT ===
    function logout() {
        if (confirm('Yakin logout?')) {
            currentUser = null;
            localStorage.removeItem('currentUser');
            showSection('home');
        }
    }

    // === INIT ===
    window.onload = function() {
        // Navigasi
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const section = this.getAttribute('href').substring(1);
                if (currentUser || section === 'home') {
                    showSection(section);
                    if (section === 'swipe') loadSwipe();
                    if (section === 'matches') loadMatches();
                } else {
                    showLogin();
                }
            });
        });

        // Enter di chat
        document.getElementById('chatInput').addEventListener('keypress', e => {
            if (e.key === 'Enter') sendMessage();
        });

        // Cek login saat load
        if (currentUser) {
            updateProfileDisplay();
            loadMatches();
            showSection('swipe');
            loadSwipe();
        } else {
            showSection('home');
        }
    };
</script>
</body>
</html>